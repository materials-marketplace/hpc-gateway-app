# this test will create a mp user to real db and create repo to hpc through f7t
import requests
import os
from urllib.parse import urljoin

MP_TOKEN = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJQMGNSQlBnZkZyVHNFTFlQTE14ZEhIcERNU2IwZWpSejFFMkdURjNidWY0In0.eyJleHAiOjE2NTk5MDE5ODcsImlhdCI6MTY1OTg3MzE4NywiYXV0aF90aW1lIjoxNjU5ODczMTg3LCJqdGkiOiIyYTJhNThlZi1mODcwLTQzMTctODg5OC00NmI3YTA0NDA1MmUiLCJpc3MiOiJodHRwczovL3N0YWdpbmcubWF0ZXJpYWxzLW1hcmtldHBsYWNlLmV1L2F1dGgvcmVhbG1zL21hcmtldHBsYWNlIiwiYXVkIjpbInJlYWxtLW1hbmFnZW1lbnQiLCJhY2NvdW50IiwiYWNjZXNzLWNvbnRyb2wiXSwic3ViIjoiMjU5OTIyMTEtZWJhMi00MGZlLWE3MDAtYjhkNGQ2MDk3Y2E5IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZnJvbnRlbmQiLCJub25jZSI6IjhkYWE3YzRiLTMxODktNGRhZC05OThhLWMwYTg0OWFmN2JiNCIsInNlc3Npb25fc3RhdGUiOiJjOTc0MWM1OC04ODg2LTQzNmQtODEwNS1kOGY2MmNkZGRmYWMiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbWFya2V0cGxhY2UiLCJvZmZsaW5lX2FjY2VzcyIsImFwcC1hZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIiwiYXBwLXVzZXIiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS1pZGVudGl0eS1wcm92aWRlcnMiLCJtYW5hZ2UtdXNlcnMiLCJtYW5hZ2UtY2xpZW50cyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19LCJmcm9udGVuZCI6eyJyb2xlcyI6WyJhZG1pbiIsInVzZXIiXX0sImFjY2Vzcy1jb250cm9sIjp7InJvbGVzIjpbImFkbWluIiwidXNlciJdfX0sInNjb3BlIjoib3BlbmlkIGNsaWVudF9yb2xlc19mcm9udGVuZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYzk3NDFjNTgtODg4Ni00MzZkLTgxMDUtZDhmNjJjZGRkZmFjIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJyb2xlcyI6WyJhZG1pbiIsInVzZXIiXSwibmFtZSI6Ikp1c29uZyBZdSIsInByZWZlcnJlZF91c2VybmFtZSI6Imp1c29uZ3l1IiwiZ2l2ZW5fbmFtZSI6Ikp1c29uZyIsImZhbWlseV9uYW1lIjoiWXUiLCJlbWFpbCI6Imp1c29uZy55dUBlcGZsLmNoIn0.dlATkkXxHZ3NjNBHtaUOal8dMdLmoQvrIJTNh1Tjjq0BFnevzXxBAAFEBk8E_6LIc1on6nEubIOtKeUse1my9LTOQydrXnb2s3SNTqCnizme4tCq0mzMOt88TTR6xrdq_qDN9OLIRV9mDcqfN90xI15EShWN8Lq5J5-wIyUrqBI65He0GJnd2_K9v2dEKKTNqWZNWibvci5b_7anoQVXbDR9U1ZvQ9tRDJ0XTpKMhVnN_yH5IHprW5bxI4qRtBa3EpTZZoTq_6oO8BbLI52J4uPqnxdBTk0uASStHaHA6bCHHd112PQd8Jjqg7v9_1EpGVSi3SV1VEvd1cgTKK_w6w"

HPCGATEWAY_URL="http://127.0.0.1:5253"

headers = {
    "Accept": "application/json",
    "User-Agent": "HPC-app",
    "Authorization": f"Bearer {MP_TOKEN}",
}

rep = requests.get(urljoin(HPCGATEWAY_URL, 'user'), headers=headers)
print(rep.json(), rep)

rep = requests.post(urljoin(HPCGATEWAY_URL, 'user'), headers=headers)
print(rep.json(), rep)