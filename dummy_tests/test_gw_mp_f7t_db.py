# this test will create a mp user to real db and create repo to hpc through f7t
import requests
import os
from urllib.parse import urljoin

MP_TOKEN = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJQMGNSQlBnZkZyVHNFTFlQTE14ZEhIcERNU2IwZWpSejFFMkdURjNidWY0In0.eyJleHAiOjE2NjMxMTM4OTMsImlhdCI6MTY2MzA4NTA5MywiYXV0aF90aW1lIjoxNjYzMDg0MTk4LCJqdGkiOiI1ZDBlYWY0NS1mOWIwLTQ3MDMtYjAwOC1jZDczZThiMDk2MDgiLCJpc3MiOiJodHRwczovL3N0YWdpbmcubWF0ZXJpYWxzLW1hcmtldHBsYWNlLmV1L2F1dGgvcmVhbG1zL21hcmtldHBsYWNlIiwiYXVkIjpbInJlYWxtLW1hbmFnZW1lbnQiLCJhY2NvdW50IiwiYWNjZXNzLWNvbnRyb2wiXSwic3ViIjoiMjU5OTIyMTEtZWJhMi00MGZlLWE3MDAtYjhkNGQ2MDk3Y2E5IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZnJvbnRlbmQiLCJub25jZSI6IjM2NzkwNDI1LWRjMTktNDEwNy04YmRkLTcyYmY2MjAzNGI4ZiIsInNlc3Npb25fc3RhdGUiOiJjZTViZGFkNC1jYWQ3LTQ1MWEtODFhNy1lMTljNjZlMDdhM2QiLCJhY3IiOiIwIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtbWFya2V0cGxhY2UiLCJvZmZsaW5lX2FjY2VzcyIsImFwcC1hZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIiwiYXBwLXVzZXIiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS1pZGVudGl0eS1wcm92aWRlcnMiLCJtYW5hZ2UtdXNlcnMiLCJtYW5hZ2UtY2xpZW50cyJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19LCJmcm9udGVuZCI6eyJyb2xlcyI6WyJhZG1pbiIsInVzZXIiXX0sImFjY2Vzcy1jb250cm9sIjp7InJvbGVzIjpbImFkbWluIiwidXNlciJdfX0sInNjb3BlIjoib3BlbmlkIGNsaWVudF9yb2xlc19mcm9udGVuZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiY2U1YmRhZDQtY2FkNy00NTFhLTgxYTctZTE5YzY2ZTA3YTNkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJyb2xlcyI6WyJhZG1pbiIsInVzZXIiXSwibmFtZSI6Ikp1c29uZyBZdSIsInByZWZlcnJlZF91c2VybmFtZSI6Imp1c29uZ3l1IiwiZ2l2ZW5fbmFtZSI6Ikp1c29uZyIsImZhbWlseV9uYW1lIjoiWXUiLCJlbWFpbCI6Imp1c29uZy55dUBlcGZsLmNoIn0.aYDT4oamYTAcTerRS17VVdiDY20WuklXIDy0PCxbSLlNG315aMy4NxGy5VdhowTUu2CpDYZAQ5fP5yjkcc9UfdRZ6u0eJlb1PV3NXJ9WV9fFg2JDIoJ07ug3tXZYJshnWvxQKzopY6bsYSlmvsQkHzHSFrytz_D3LxCnD-MY3UQ7rMYUh3yliHKSzX2kkR2TuJaQ2ZG1q-pCvVNLr-1um09OacrWaeCUqlrLt4X7j73-_gxYutKQOfgziTDiX59VKfd4ZriOX0M-vvjOmG7dbGVFher1vIc56zYZP7POZh7L9ONkXMMIeJBGzeDQ2sx1ACbqAPt-DddEIsYxRmLU2w"

HPCGATEWAY_URL="http://127.0.0.1:5253"

headers = {
    "Accept": "application/json",
    "User-Agent": "HPC-app",
    "Authorization": f"Bearer {MP_TOKEN}",
}

# rep = requests.get(urljoin(HPCGATEWAY_URL, 'user'), headers=headers)
# print(rep.json(), rep)

rep = requests.post(urljoin(HPCGATEWAY_URL, 'user'), headers=headers)
print(rep.json(), rep)